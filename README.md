<div align="center">
<img src="RumDiceLogo.png" width="300"/>

# RumDice

_⚡ 以方便拓展为目标而开发的 原生C# 跑团机器人核心 ⚡_

![LICENSE](https://img.shields.io/badge/license-MIT-yellow.svg?style=flat)
</div>

## 简介
> **这里是朗姆骰，你也可以叫它怪怪骰！**

当前主流的机器人核心框架不能直接进行C#的插件开发，并且想要开发非常复杂的插件功能并不是很好实现。

出于为了给这种状况提供一个解决方案的目的，我开发了此框架。

在这个项目下，你可以用C#非常快捷的进行回复接口声明和编写，也可以用C#、lua等语言作为脚本语言进行外挂插件开发。
同时，我们制作了大量接口以方便插件作者进行自定义操作，包括自定义任意数据类型并利用我们提供的api进行自动的序列化存取。

### 如何使用 RumDice
无论你是开发者还是普通使用者，我都专门撰写了详细的文档以介绍使用方法。（不过目前还没太写完

在正式版（v1.0）版本推出时，所有类型的用户都可以利用文档快速掌握 RumDice. 

[RumDice的文档中心！](https://github.com/iLoner121/RumDice/wiki)

#### 简单入门
在这里简单说明一下整个项目的代码结构
- RumDice 总文件夹
  - Core 核心部分，包含了项目的初始化、收发信息、自动匹配关键词接口等模块（一般不用修改这里）
    - Initializer 初始化程序
    - ClientConnector 和gocqhttp交互的组件
    - CoreData 系统核心功能所需数据及其管理器
    - EventManager 事件处理器，包括关键词匹配等功能
    - MessagePipeline 信息管线，用于均衡消息传入和发送的速率，以及多线程调用事件处理器
    - Startup 启动类，Main函数所在位置，系统组件注册依赖注入的位置
  - Framework 重要的服务类，主要包含文件系统、Log系统、语句处理工具等模块（一般情况下只需调用就好了）
    - Attribute文件夹 所有的Attribute在此声明（用于识别自定义服务）
    - Datatype文件夹 系统主要的数据类型在此声明，包括各类数据包的声明
    - Enum文件夹 系统主要的枚举类型在此声明
    - DataCenter **文件系统**，实现自定义数据类型的本地序列化存、取、在内存中缓存
    - MessageTool **语句处理工具**，包含自动替换回复语句中的参数，自动提取数据包内的类型、文本消息，自动生成回复包等功能
    - RumLogger **日志系统**，在控制台以及本地输出和存储系统日志
    - ServiceManager 对象管理器，管理自定义类型的生成和生命周期，一般情况下用不到（直接new或者访问单例就好了）
  - Module 功能模块部分，也就是说如果你要新增回复接口等功能，就要在这里写代码
    - Example **示例类**，该类和它的接口演示了该系统增加自定义服务的标准流程，内置了几个示例回复接口（你可以修改这个类的内容，但是**一定不要将它和它的接口删除！！！！**）
  - Repository 仓库文件夹，里面全都是各类json。如果你要存储文件，就会存在这个文件夹下面的相对路径里
  - Test 测试程序
  - AppSetting.json 系统设置，如果缺失该文件会在第一次运行时自动创建，其值为默认值

### 更新日志
##### 最新版本
**v0.5.0**
- 实现了三种缓存模式的，可自定义存储类型的文件存取系统
- 实现了可自定义的log系统
- 实现了收、发消息的消息队列，以及自动延迟发送功能
- 实现了快捷自定义输出语句功能
- 提供了消息处理工具，支持两种形式替换回复语句内的参数
- 实现了内置服务的自动调用（用作字符串内自动替换）
- 为log系统和文件系统提供了单例的全局访问方法
###### 版本总结
处理框架已经基本完成，可以支持内容功能的开发。能够支持自定义数据类型作为格式，以json形式进行自动存取。提供了一种简单的内置数据结构，能满足一些基本开发需求。

从接口的声明、信息的自动分配到信息的发送；从数据的存储到数据的取回；包括自动生成回复语句和回复数据包，都已经经过了封装，可以直接调用现成的方法。

##### 日志全文
[更新日志全文](https://github.com/iLoner121/RumDice/wiki/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97)


### 当前开发计划
目前，该库尚未开发完成，我提前发出以记录我的开发过程并邀请广大对C#有热情的跑团人的参加。
在完成该项目的开发之后，我会制作两个基于此框架的机器人“德洛莉丝”和“菲洛米娜”作为示例项目，以便想要搭建自己的骰子的骰主参考或直接使用。
再往后，我会自己实现和gocqhttp的连接-自己完成对mirai的封装-自己实现协议。届时，将有一个完全C#原生的机器人框架。
